---
import { getLiveCollection } from 'astro:content';

const { entries: raindrops, error } = await getLiveCollection('raindrops');

if (error) {
  console.error('Collection error:', error.message);
}
---

<div>
  {raindrops && raindrops.length === 0 ? (
    <p>No bookmarks found.</p>
  ) : (
    <div class="link-list">
        {raindrops && raindrops.map((raindrop: any) => (
            <div class="link-item">
                <h2><a href={raindrop.data.link} target="_blank" rel="noopener noreferrer">{raindrop.data.title}</a></h2>
                {/* Check for excerpt */}
                {(raindrop.data.excerpt && raindrop.data.excerpt.trim()) && (
                  <blockquote class="raindrop-excerpt">
                    {raindrop.data.excerpt}
                  </blockquote>
                )}
                {/* Check for note */}
                {(raindrop.data.note && raindrop.data.note.trim()) && (
                  <p class="raindrop-note">
                    {raindrop.data.note}
                  </p>
                )}
            </div>
        ))}
    </div>
  )}
</div>
